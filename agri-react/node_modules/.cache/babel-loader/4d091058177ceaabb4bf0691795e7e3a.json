{"ast":null,"code":"var _jsxFileName = \"/Users/seansie/Desktop/2023 Agri Blockchain \\u7E3D\\u7D71\\u76C3/Backend/agri_code/agri-react/src/posts.js\";\nimport React from 'react';\nimport { Create, List, Datagrid, TextField, ReferenceField, EditButton, FunctionField } from 'react-admin';\nimport { Edit, SimpleForm, DisabledInput, ReferenceInput, SelectInput, TextInput, LongTextInput } from 'react-admin';\nimport { DeleteButton, UrlField, FileField, FileInput, Show, SimpleShowLayout, DateField, RichTextField } from 'react-admin';\nimport Button from '@material-ui/core/Button';\nimport CardActions from '@material-ui/core/CardActions';\nexport const PostList = props => React.createElement(List, Object.assign({\n  title: React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 10\n    },\n    __self: this\n  }, \"\\u6848\\u4EF6\\u6E05\\u55AE\")\n}, props, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 10\n  },\n  __self: this\n}), React.createElement(Datagrid, {\n  rowClick: \"show\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 11\n  },\n  __self: this\n}, React.createElement(TextField, {\n  label: \"\\u4F9B\\u61C9\\u5546\",\n  source: \"bidname\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 12\n  },\n  __self: this\n}), React.createElement(TextField, {\n  label: \"\\u4F9B\\u61C9\\u5546\\u63D0\\u4F9B\\u5546\\u54C1\",\n  source: \"commodity\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 13\n  },\n  __self: this\n}), React.createElement(TextField, {\n  label: \"\\u6578\\u91CF\",\n  source: \"bidamount\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 14\n  },\n  __self: this\n}), React.createElement(TextField, {\n  label: \"\\u55AE\\u50F9\",\n  source: \"bidprice\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 15\n  },\n  __self: this\n}), React.createElement(TextField, {\n  label: \"\\u6307\\u5B9A\\u4EA4\\u6613\",\n  source: \"bidspecified\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 16\n  },\n  __self: this\n}), React.createElement(EditButton, {\n  label: \"\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 17\n  },\n  __self: this\n}), React.createElement(DeleteButton, {\n  label: \"\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 18\n  },\n  __self: this\n})));\nexport const PostCreate = props => React.createElement(Create, Object.assign({}, props, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 24\n  },\n  __self: this\n}), React.createElement(SimpleForm, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 25\n  },\n  __self: this\n}, React.createElement(TextInput, {\n  label: \"\\u4F9B\\u61C9\\u5546\",\n  source: \"bidname\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 26\n  },\n  __self: this\n}), React.createElement(TextInput, {\n  label: \"\\u4F9B\\u61C9\\u5546\\u63D0\\u4F9B\\u5546\\u54C1\",\n  source: \"commodity\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 27\n  },\n  __self: this\n}), React.createElement(TextInput, {\n  label: \"\\u6578\\u91CF\",\n  source: \"bidamount\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 28\n  },\n  __self: this\n}), React.createElement(TextInput, {\n  label: \"\\u55AE\\u50F9\",\n  source: \"bidprice\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 29\n  },\n  __self: this\n}), React.createElement(TextInput, {\n  label: \"\\u6307\\u5B9A\\u5546\\u5BB6\",\n  source: \"bidspecified\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 30\n  },\n  __self: this\n}), React.createElement(TextInput, {\n  label: \"\\u6307\\u5B9A\\u4EA4\\u6613\",\n  source: \"askname\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 31\n  },\n  __self: this\n}), React.createElement(TextInput, {\n  label: \"\\u5546\\u6307\\u5B9A\\u4EA4\\u6613\\u54C1\",\n  source: \"a_commodity\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 32\n  },\n  __self: this\n}), React.createElement(TextInput, {\n  label: \"\\u6578\\u91CF\",\n  source: \"askamount\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 33\n  },\n  __self: this\n}), React.createElement(TextInput, {\n  label: \"\\u55AE\\u50F9\",\n  source: \"askprice\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 34\n  },\n  __self: this\n}), React.createElement(TextInput, {\n  label: \"\\u6307\\u5B9A\\u5546\\u5BB6\",\n  source: \"askspecified\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 35\n  },\n  __self: this\n})));\nexport const PostEdit = props => React.createElement(Edit, Object.assign({}, props, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 41\n  },\n  __self: this\n}), React.createElement(SimpleForm, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 42\n  },\n  __self: this\n}, React.createElement(TextInput, {\n  label: \"\\u4F9B\\u61C9\\u5546\",\n  source: \"bidname\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 43\n  },\n  __self: this\n}), React.createElement(TextInput, {\n  label: \"\\u4F9B\\u61C9\\u5546\\u63D0\\u4F9B\\u5546\\u54C1\",\n  source: \"commodity\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 44\n  },\n  __self: this\n}), React.createElement(TextInput, {\n  label: \"\\u6578\\u91CF\",\n  source: \"bidamount\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 45\n  },\n  __self: this\n}), React.createElement(TextInput, {\n  label: \"\\u55AE\\u50F9\",\n  source: \"bidprice\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 46\n  },\n  __self: this\n}), React.createElement(TextInput, {\n  label: \"\\u6307\\u5B9A\\u5546\\u5BB6\",\n  source: \"bidspecified\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 47\n  },\n  __self: this\n}), React.createElement(TextInput, {\n  label: \"\\u6307\\u5B9A\\u4EA4\\u6613\",\n  source: \"askname\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 48\n  },\n  __self: this\n}), React.createElement(TextInput, {\n  label: \"\\u5546\\u6307\\u5B9A\\u4EA4\\u6613\\u54C1\",\n  source: \"a_commodity\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 49\n  },\n  __self: this\n}), React.createElement(TextInput, {\n  label: \"\\u6578\\u91CF\",\n  source: \"askamount\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 50\n  },\n  __self: this\n}), React.createElement(TextInput, {\n  label: \"\\u55AE\\u50F9\",\n  source: \"askprice\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 51\n  },\n  __self: this\n}), React.createElement(TextInput, {\n  label: \"\\u6307\\u5B9A\\u5546\\u5BB6\",\n  source: \"askspecified\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 52\n  },\n  __self: this\n}))); // function a(data, len, c) { \n// \tvar f = [];\n// \tfor (var i=0; i<len; i++) {\n// \t\tvar h = data[\"hash\"][i]\n// \t\tvar im = data[\"imghash\"][i]\n// \t\tthis.b(h, im, c);\n// \t};\n// };\n\nexport class PostShow extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      loading: true,\n      data: null\n    };\n\n    this.PostShowActions = ({\n      basePath,\n      data,\n      resource\n    }) => React.createElement(CardActions, {\n      style: this.cardActionStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(Button, {\n      color: \"primary\",\n      onClick: async () => {\n        if (data[\"id\"] == \"\") {\n          window.alert(\"No Hash Yet!!\");\n          return;\n        } else {\n          var tx_h;\n          var h;\n          fetch(\"http://52.90.64.113:8000/verifyhash/\" + data[\"id\"]).then(response => {\n            if (response.status == 200) {\n              return response.text();\n            } else if (response.status == 500) {\n              window.alert(\"verify Something Wrong!!\");\n              return;\n            } else {\n              window.alert(\"verify Server Error! Call Engineers!\");\n              return;\n            }\n          }).then(response => {\n            tx_h = response.split(\" \")[0];\n            h = response.split(\" \")[1];\n            console.log(h);\n            var x = {\n              'failure': 0\n            };\n            this.b(tx_h, h, x);\n          }); // var len = data[\"hash\"].length\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, \"\\u6AA2\\u67E5\\u8CC7\\u6599\\u6B63\\u78BA\\u6027\"), React.createElement(EditButton, {\n      basePath: basePath,\n      record: data,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }));\n\n    this.PostTitle = ({\n      record\n    }) => {\n      return React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, \"\\u6848\\u4EF6\\u4EE3\\u865F: \", record ? \"\".concat(record.id) : '', \"(\\u96A8\\u6A5F\\u7522\\u751F)\"));\n    };\n  }\n\n  b(tx_h, h, c) {\n    console.log(\"https://ropsten.etherscan.io/tx/\" + tx_h);\n    fetch(\"https://ropsten.etherscan.io/tx/\" + tx_h).then(response => {\n      if (response.status == 200) {\n        return response.text();\n      } else if (response.status == 500) {\n        window.alert(\"Something Wrong!!\");\n        return;\n      } else {\n        window.alert(\"Server Error! Call Engineers!\");\n        return;\n      }\n    }).then(response => {\n      var domparser = new DOMParser();\n      var doc = domparser.parseFromString(response, \"text/html\");\n      var hash = doc.getElementById(\"inputdata\");\n\n      if (hash == null || hash == undefined) {\n        window.alert(\"資料正在上鏈，請稍候\");\n        return;\n      }\n\n      hash = hash.innerHTML;\n\n      if (hash == null || hash == undefined) {\n        window.alert(\"資料正在上鏈，請稍候\");\n        return;\n      }\n\n      hash = hash.split(\"\\n\")[4].split(\" \")[2];\n\n      if (hash == h) {\n        window.alert(\"資料無竄改紀錄\");\n        return;\n      } else {\n        window.alert(\"警告：資料被竄改\");\n        c.failure = 1;\n        return;\n      }\n    });\n  }\n\n  async componentDidMount() {\n    const url = \"http://52.90.64.113:8000/post\";\n    const response = await fetch(url);\n    const data = await response.json();\n    this.setState({\n      data: data,\n      loading: false\n    });\n  }\n\n  render() {\n    if (this.state.loading) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, \"loading...\");\n    }\n\n    if (!this.state.data) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, \"didn't get a data\");\n    } // Data\n\n\n    return React.createElement(Show, Object.assign({\n      title: React.createElement(this.PostTitle, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      })\n    }, this.props, {\n      actions: React.createElement(this.PostShowActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }), React.createElement(SimpleShowLayout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(TextField, {\n      label: \"\\u5EFA\\u7ACB\\u6642\\u9593\",\n      source: \"date\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }), React.createElement(TextField, {\n      label: \"\\u4F9B\\u61C9\\u5546\\u63D0\\u4F9B\\u5546\\u54C1\",\n      source: \"commodity\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }), React.createElement(TextField, {\n      label: \"\\u4F9B\\u61C9\\u5546\",\n      source: \"bidname\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }), React.createElement(TextField, {\n      label: \"\\u6578\\u91CF\",\n      source: \"bidamount\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }), React.createElement(TextField, {\n      label: \"\\u55AE\\u50F9\",\n      source: \"bidprice\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }), React.createElement(TextField, {\n      label: \"\\u6307\\u5B9A\\u5546\\u5BB6\",\n      source: \"bidspecified\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }), React.createElement(TextField, {\n      label: \"\\u6307\\u5B9A\\u4EA4\\u6613\",\n      source: \"askname\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }), React.createElement(TextField, {\n      label: \"\\u5546\\u6307\\u5B9A\\u4EA4\\u6613\\u54C1\",\n      source: \"a_commodity\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }), React.createElement(TextField, {\n      label: \"\\u6578\\u91CF\",\n      source: \"askamount\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }), React.createElement(TextField, {\n      label: \"\\u55AE\\u50F9\",\n      source: \"askprice\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }), React.createElement(TextField, {\n      label: \"\\u6307\\u5B9A\\u5546\\u5BB6\",\n      source: \"askspecified\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }), React.createElement(UrlField, {\n      label: \"\\u5340\\u584A\\u93C8\\u8CC7\\u6599\",\n      source: \"txurl\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    })));\n  }\n\n}","map":{"version":3,"sources":["/Users/seansie/Desktop/2023 Agri Blockchain 總統盃/Backend/agri_code/agri-react/src/posts.js"],"names":["React","Create","List","Datagrid","TextField","ReferenceField","EditButton","FunctionField","Edit","SimpleForm","DisabledInput","ReferenceInput","SelectInput","TextInput","LongTextInput","DeleteButton","UrlField","FileField","FileInput","Show","SimpleShowLayout","DateField","RichTextField","Button","CardActions","PostList","props","PostCreate","PostEdit","PostShow","Component","state","loading","data","PostShowActions","basePath","resource","cardActionStyle","window","alert","tx_h","h","fetch","then","response","status","text","split","console","log","x","b","PostTitle","record","id","c","domparser","DOMParser","doc","parseFromString","hash","getElementById","undefined","innerHTML","failure","componentDidMount","url","json","setState","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Create, List, Datagrid, TextField, ReferenceField, EditButton, FunctionField } from 'react-admin';\nimport { Edit, SimpleForm, DisabledInput, ReferenceInput, SelectInput, TextInput, LongTextInput} from 'react-admin';\nimport { DeleteButton, UrlField, FileField, FileInput, Show, SimpleShowLayout, DateField, RichTextField } from 'react-admin';\nimport Button from '@material-ui/core/Button';\nimport CardActions from '@material-ui/core/CardActions';\n\n\nexport const PostList = props => (\n    <List title={<span>案件清單</span>} {...props}>\n        <Datagrid rowClick=\"show\">\n            <TextField label=\"供應商\" source=\"bidname\"/>\n            <TextField label=\"供應商提供商品\" source=\"commodity\"/>\n            <TextField label=\"數量\" source=\"bidamount\"/>\n            <TextField label=\"單價\" source=\"bidprice\"/>\n            <TextField label=\"指定交易\" source=\"bidspecified\"/>\n            <EditButton label=\"\"/>\n\t    <DeleteButton label=\"\"/>\n        </Datagrid>\n    </List>\n);\n\nexport const PostCreate = (props) => (\n    <Create {...props}>\n        <SimpleForm>\n            <TextInput label=\"供應商\" source=\"bidname\"/>\n            <TextInput label=\"供應商提供商品\" source=\"commodity\"/>\n            <TextInput label=\"數量\" source=\"bidamount\"/>\n            <TextInput label=\"單價\" source=\"bidprice\"/>\n            <TextInput label=\"指定商家\" source=\"bidspecified\"/>\n            <TextInput label=\"指定交易\" source=\"askname\"/>\n            <TextInput label=\"商指定交易品\" source=\"a_commodity\"/>\n            <TextInput label=\"數量\" source=\"askamount\"/>\n            <TextInput label=\"單價\" source=\"askprice\"/>\n            <TextInput label=\"指定商家\" source=\"askspecified\"/>\n        </SimpleForm>\n    </Create>\n);\n\nexport const PostEdit = props => (\n      <Edit {...props}>\n          <SimpleForm>\n            <TextInput label=\"供應商\" source=\"bidname\"/>\n            <TextInput label=\"供應商提供商品\" source=\"commodity\"/>\n            <TextInput label=\"數量\" source=\"bidamount\"/>\n            <TextInput label=\"單價\" source=\"bidprice\"/>\n            <TextInput label=\"指定商家\" source=\"bidspecified\"/>\n            <TextInput label=\"指定交易\" source=\"askname\"/>\n            <TextInput label=\"商指定交易品\" source=\"a_commodity\"/>\n            <TextInput label=\"數量\" source=\"askamount\"/>\n            <TextInput label=\"單價\" source=\"askprice\"/>\n            <TextInput label=\"指定商家\" source=\"askspecified\"/>\n          </SimpleForm>\n      </Edit>\n);\n\n\n// function a(data, len, c) { \n// \tvar f = [];\n// \tfor (var i=0; i<len; i++) {\n// \t\tvar h = data[\"hash\"][i]\n// \t\tvar im = data[\"imghash\"][i]\n// \t\tthis.b(h, im, c);\n// \t};\n// };\n\nexport class PostShow extends React.Component {\n  state = {\n    loading: true,\n    data: null\n  };\nb(tx_h, h, c) {\n\tconsole.log(\"https://ropsten.etherscan.io/tx/\" + tx_h)\n\tfetch(\"https://ropsten.etherscan.io/tx/\" + tx_h).\n\tthen((response) => { \n\tif (response.status == 200) { return response.text();}\n\telse if (response.status == 500) {\n\t\twindow.alert(\"Something Wrong!!\");\n\t\treturn;}\n\telse { window.alert(\"Server Error! Call Engineers!\");\n\t\treturn; }})\n\t.then((response) => {\n\tvar domparser = new DOMParser()\n\tvar doc = domparser.parseFromString(response, \"text/html\")\n\tvar hash = doc.getElementById(\"inputdata\")\n    \tif (hash == null || hash == undefined) {\n\t    window.alert(\"資料正在上鏈，請稍候\");\n\t    return;\n\t}\n\thash = hash.innerHTML\n    \tif (hash == null || hash == undefined) {\n\t    window.alert(\"資料正在上鏈，請稍候\");\n\t    return;\n\t}\n\thash = hash.split(\"\\n\")[4].split(\" \")[2]\n\tif (hash == h) {\n\t\twindow.alert(\"資料無竄改紀錄\");\n\t\treturn;\n\t}\n\telse {\n\t\twindow.alert(\"警告：資料被竄改\");\n\t\tc.failure = 1;\n\t\treturn;\n\t}\n\t}\n\t)\n};\nPostShowActions = ({ basePath, data, resource }) => (\n  <CardActions style={this.cardActionStyle}>\n  <Button color=\"primary\" onClick={\n  async () => {\n    if ( data[\"id\"] == \"\") {\n      window.alert(\"No Hash Yet!!\");\n      return;\n    }\n    else {\n\tvar tx_h;\n\tvar h;\n\tfetch(\"http://52.90.64.113:8000/verifyhash/\" + data[\"id\"]).\n\tthen((response) => { \n\tif (response.status == 200) { return response.text();}\n\telse if (response.status == 500) {\n\t\twindow.alert(\"verify Something Wrong!!\");\n\t\treturn;}\n\telse { window.alert(\"verify Server Error! Call Engineers!\");\n\t\treturn; }})\n\t\t.then((response) => {\n\t\ttx_h = response.split(\" \")[0]\n\t\th = response.split(\" \")[1]\n\t\tconsole.log(h)\n\t        var x = {'failure': 0};\n\t\tthis.b(tx_h, h, x)\n\t})\n      // var len = data[\"hash\"].length\n    }\n  }\n  }>檢查資料正確性</Button>\n  <EditButton basePath={basePath} record={data} />\n  </CardActions>\n);\n\n  async componentDidMount() {\n    const url = \"http://52.90.64.113:8000/post\";\n    const response = await fetch(url);\n    const data = await response.json();\n    this.setState({ data: data, loading: false });\n  }\n\n  PostTitle = ({ record }) => {\n        return <span><span>案件代號: {record ? `${record.id}` : ''}(隨機產生)</span></span>;\n  };\n\n  render() {\n    if (this.state.loading) {\n      return <div>loading...</div>;\n    }\n\n    if (!this.state.data) {\n      return <div>didn't get a data</div>;\n    }\n    // Data\n    return (\n    <Show title={< this.PostTitle/>} {...this.props} actions={<this.PostShowActions />}>\n        <SimpleShowLayout>\n            <TextField label=\"建立時間\" source=\"date\"/>\n            <TextField label=\"供應商提供商品\" source=\"commodity\"/>\n            <TextField label=\"供應商\" source=\"bidname\"/>\n            <TextField label=\"數量\" source=\"bidamount\"/>\n            <TextField label=\"單價\" source=\"bidprice\"/>\n            <TextField label=\"指定商家\" source=\"bidspecified\"/>\n            <TextField label=\"指定交易\" source=\"askname\"/>\n            <TextField label=\"商指定交易品\" source=\"a_commodity\"/>\n            <TextField label=\"數量\" source=\"askamount\"/>\n            <TextField label=\"單價\" source=\"askprice\"/>\n            <TextField label=\"指定商家\" source=\"askspecified\"/>\n            <UrlField  label=\"區塊鏈資料\" source=\"txurl\"/>\n        </SimpleShowLayout>\n    </Show>\n);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}